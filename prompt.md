# Общие инструкции для проекта (v1.0):

## 1. Структура проекта
```
src/  
├── components/      # Переиспользуемые компоненты
├── hooks/           # Кастомные хуки
├── stores/          # Глобальные состояния (Zustand, MobX и т.д.)
├── services/        # Логика API (React Query, SWR, RxJS)
├── constants/       # Конфиги, стили, константы
├── utils/           # Вспомогательные функции
└── assets/          # Статические файлы (изображения, шрифты)
```

### 1.1. Компоненты
- Названия компонентов должны отражать их назначение (например, ```<ProjectCard />```, а не ```<Card />```).

- Каждый компонент должен быть в отдельной папке с файлами:

  - ```ComponentName.jsx``` — основной код компонента.

  - ```ComponentName.styles.js``` — стили (если используются CSS-in-JS).

  - ```ComponentName.test.js``` — тесты.

### 1.2. Стилизация
- Используйте Tailwind CSS для стилизации.

- Если нужны кастомные стили, выносите их в ```constants/styles.js```.

- Пример:
```jsx
export const MODAL_STYLES = {
  OVERLAY: "fixed inset-0 bg-black/50",
  CONTENT: "bg-white rounded-lg p-6"
};
```

### 1.3. Сервисы
- Вся логика API должна быть вынесена в services/.

- Используйте RxJS для реактивного программирования.

- Пример:

```jsx
class ApiService {
  constructor() {
    this.data$ = new BehaviorSubject(null);
  }

  fetchData() {
    return fetch(url).pipe(
      tap(data => this.data$.next(data)),
      catchError(this.handleError)
    );
  }
}
```

## 2. Философия разработки

### 2.1. Единство формы и содержания
- Компоненты должны отражать суть решаемой задачи.

- Избегайте абстрактных названий (например, ```<Card />``` → ```<ProjectCard />```).

### 2.2. Развитие через противоречия
- Рефакторинг проводите итеративно, выявляя конфликты:

  - "Состояние vs Потоки данных".

  - "Производительность vs Сложность".

### 2.3. Практика как критерий истины
- Каждое изменение должно быть обосновано реальными метриками (производительность, читаемость, удобство поддержки).

## 3. Технические требования
### 3.1. Реактивное программирование
- Используйте ```useObservable``` вместо ```useState``` для управления состоянием.

- Пример:

```jsx
const state = useObservable({ 
  modal: { 
    isOpen: false 
  } 
});
```

### 3.2. Обработчики событий
- Называйте обработчики событий через handle*.

- Пример:

```jsx
const handleCardClick = () => { ... };

<button onClick={handleCardClick}>
```

### 3.3. Оптимизация
- Используйте ```React.memo``` для мемоизации компонентов.

- Ленивая загрузка компонентов через ```React.lazy```.

## 4. Процесс внедрения

### 4.1. Базовый рефакторинг
- Замена ```useState``` → ```useObservable```.

- Вынос стилей в ```constants/```.

- Переименование обработчиков событий.

### 4.2. Интеграция RxJS
- Создание сервисов для:

  - Загрузки данных.

  - Управления состоянием.

  - Обработки событий.

### 4.3. Оптимизация
- Мемоизация через ```React.memo```.

- Ленивая загрузка компонентов.

## 5. Формат коммитов
Используйте следующий формат сообщений коммитов:

```
<тип>(<область>): <описание>

Примеры:
feat(modal): add rxjs-based animation system
fix(image): retry loading logic
refactor(header): migrate to useObservable
```

### Типы коммитов:
- ```feat``` — новая функциональность.

- ```fix``` — исправление ошибок.

- ```refactor``` — рефакторинг кода.

- ```docs``` — изменения в документации.

- ```style``` — изменения в стилях.

- ```test``` — добавление или изменение тестов.

## 6. Контроль качества
### 6.1. ESLint
- Используйте ESLint для проверки кода.

- Пример правил:

```javascript
rules: {
  'react/hook-naming': ['error', { 
    checkEffectDeps: true 
  }],
  'no-vanilla-state': 'error'
}
```

### 6.2. Тестирование
- Каждый сервис должен иметь юнит-тесты.

- Пример:

```javascript
test('apiService fetches data', async () => {
  await apiService.fetchData();
  expect(apiService.data$.value).toBeDefined();
});
```

## 7. Пример рефакторинга

### Было:
```jsx
const [count, setCount] = useState(0);
```

### Стало:
```jsx
import { useObservable } from '@legendapp/state/react';

const state = useObservable({ count: 0 });

// Обновление
state.count.set(5);
```

## 8. Дополнительные рекомендации
- **Документация**: Каждый компонент, хук или сервис должен иметь описание в виде комментариев.

- **Code Review**: Все изменения должны проходить код-ревью.

- **Чистый код**: Следуйте принципам чистого кода (KISS, DRY, YAGNI).